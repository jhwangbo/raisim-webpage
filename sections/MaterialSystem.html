

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Material System &mdash; raisim 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Height Map" href="HeightMap.html" />
    <link rel="prev" title="Contact and Collision" href="Contact.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: White" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> raisim
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Acknowledgement.html">Acknowledgement</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSim C++</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConventionsAndNotations.html">Conventions and Notations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorldSystem.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="Object.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contact.html">Contact and Collision</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Material System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-single-bodies">Example - Single Bodies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xml-way">XML Way</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-way">C++ Way</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-articulated-systems">Example - Articulated Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#urdf-way">URDF Way</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">C++ Way</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HeightMap.html">Height Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="Constraints.html">Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="RayTest.html">Ray Test</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSimMatlab</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RaiSimMatlabIntroduction.html">RaisimMatlab Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaiSimMatlabExample.html">RaisimMatlab Example</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSimPy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RaiSimPyIntroduction.html">RaisimPy Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaiSimPyExample.html">RaisimPy Example</a></li>
</ul>
<p class="caption"><span class="caption-text">Related Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RaisimGymTorch.html">RaisimGymTorch</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">raisim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Material System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="material-system">
<h1>Material System<a class="headerlink" href="#material-system" title="Permalink to this headline">¶</a></h1>
<p><strong>In RaiSim, all material properties are associated with a material pair.</strong></p>
<p>Currently, there are three material properties used in RaiSim.</p>
<ul class="simple">
<li><p>Coefficient of friction (<span class="math notranslate nohighlight">\(\mu\ge 0\)</span>): This defines how much friction is applied between the two materials</p></li>
<li><p>Coefficient of restitution (<span class="math notranslate nohighlight">\(c_r\ge 0\)</span>): How bouncy the material pair is</p></li>
<li><p>Restitution Threshold (<span class="math notranslate nohighlight">\(c_{th}\ge 0\)</span>): If the impact velocity is smaller than this number, objects do not bounce off</p></li>
</ul>
<p>The bounce velocity is computed as <span class="math notranslate nohighlight">\(c_{th}(v_i-c_{th})\)</span>, where <span class="math notranslate nohighlight">\(v_i\)</span> is the impact velocity.</p>
<p>A material name is set when the material is created.
For example,</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">ball</span> <span class="o">=</span> <span class="n">world</span><span class="p">.</span><span class="n">addSphere</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;steel&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>World owns a materials manager which holds all material pair properties.
Unrecognized material pairs will get <strong>default material properties</strong>, which can be set as <code class="code docutils literal notranslate"><span class="pre">raisim::World::setDefaultMaterial</span></code>.
If the default material pair properties are not set, they are {<span class="math notranslate nohighlight">\(\mu=0.8\)</span>, <span class="math notranslate nohighlight">\(c_r=0\)</span>, <span class="math notranslate nohighlight">\(c_{th}=0\)</span>}.</p>
<p>Material properties over a pair can be defined as following</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">world</span><span class="p">.</span><span class="n">setMaterialPairProp</span><span class="p">(</span><span class="s">&quot;steel&quot;</span><span class="p">,</span> <span class="s">&quot;glass&quot;</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">);</span>
</pre></div>
</div>
<p>The first two arguments are the two material names and the following three are the coefficient of friction, coeffcient of restitution, and restitution threshold.
The order of the material names does not matter.</p>
<div class="section" id="example-single-bodies">
<h2>Example - Single Bodies<a class="headerlink" href="#example-single-bodies" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/materials.gif" src="../_images/materials.gif" />
<div class="section" id="xml-way">
<h3>XML Way<a class="headerlink" href="#xml-way" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="nt">&lt;raisim</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;timeStep</span> <span class="na">value=</span><span class="s">&quot;0.001&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;objects&gt;</span>
        <span class="nt">&lt;ground</span> <span class="na">name=</span><span class="s">&quot;ground&quot;</span> <span class="na">material=</span><span class="s">&quot;steel&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">name=</span><span class="s">&quot;sphere_steel&quot;</span> <span class="na">mass=</span><span class="s">&quot;1&quot;</span> <span class="na">material=</span><span class="s">&quot;steel&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;dim</span> <span class="na">radius=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;state</span> <span class="na">pos=</span><span class="s">&quot;-2 0 5&quot;</span> <span class="na">quat=</span><span class="s">&quot;1 0 0 0&quot;</span> <span class="na">linVel=</span><span class="s">&quot;0 0 0&quot;</span> <span class="na">angVel=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/sphere&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">name=</span><span class="s">&quot;sphere_rubber&quot;</span> <span class="na">mass=</span><span class="s">&quot;1&quot;</span> <span class="na">material=</span><span class="s">&quot;rubber&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;dim</span> <span class="na">radius=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;state</span> <span class="na">pos=</span><span class="s">&quot;0 0 5&quot;</span> <span class="na">quat=</span><span class="s">&quot;1 0 0 0&quot;</span> <span class="na">linVel=</span><span class="s">&quot;0 0 0&quot;</span> <span class="na">angVel=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/sphere&gt;</span>
        <span class="nt">&lt;sphere</span> <span class="na">name=</span><span class="s">&quot;sphere_copper&quot;</span> <span class="na">mass=</span><span class="s">&quot;1&quot;</span> <span class="na">material=</span><span class="s">&quot;copper&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;dim</span> <span class="na">radius=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;state</span> <span class="na">pos=</span><span class="s">&quot;2 0 5&quot;</span> <span class="na">quat=</span><span class="s">&quot;1 0 0 0&quot;</span> <span class="na">linVel=</span><span class="s">&quot;0 0 0&quot;</span> <span class="na">angVel=</span><span class="s">&quot;0 0 0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/sphere&gt;</span>
    <span class="nt">&lt;/objects&gt;</span>
    <span class="nt">&lt;material&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">friction=</span><span class="s">&quot;0.8&quot;</span> <span class="na">restitution=</span><span class="s">&quot;0&quot;</span> <span class="na">restitution_threshold=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;pair_prop</span> <span class="na">name1=</span><span class="s">&quot;steel&quot;</span> <span class="na">name2=</span><span class="s">&quot;steel&quot;</span> <span class="na">friction=</span><span class="s">&quot;0.8&quot;</span> <span class="na">restitution=</span><span class="s">&quot;0.95&quot;</span> <span class="na">restitution_threshold=</span><span class="s">&quot;0.001&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;pair_prop</span> <span class="na">name1=</span><span class="s">&quot;steel&quot;</span> <span class="na">name2=</span><span class="s">&quot;rubber&quot;</span> <span class="na">friction=</span><span class="s">&quot;0.8&quot;</span> <span class="na">restitution=</span><span class="s">&quot;0.15&quot;</span> <span class="na">restitution_threshold=</span><span class="s">&quot;0.001&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;pair_prop</span> <span class="na">name1=</span><span class="s">&quot;steel&quot;</span> <span class="na">name2=</span><span class="s">&quot;copper&quot;</span> <span class="na">friction=</span><span class="s">&quot;0.8&quot;</span> <span class="na">restitution=</span><span class="s">&quot;0.65&quot;</span> <span class="na">restitution_threshold=</span><span class="s">&quot;0.001&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/material&gt;</span>
    <span class="nt">&lt;camera</span> <span class="na">follow=</span><span class="s">&quot;anymal&quot;</span> <span class="na">x=</span><span class="s">&quot;1&quot;</span> <span class="na">y=</span><span class="s">&quot;1&quot;</span> <span class="na">z=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/raisim&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="c-way">
<h3>C++ Way<a class="headerlink" href="#c-way" title="Permalink to this headline">¶</a></h3>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;raisim/RaisimServer.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;raisim/World.hpp&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">auto</span> <span class="n">binaryPath</span> <span class="o">=</span> <span class="n">raisim</span><span class="o">::</span><span class="n">Path</span><span class="o">::</span><span class="n">setFromArgv</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="n">raisim</span><span class="o">::</span><span class="n">World</span><span class="o">::</span><span class="n">setActivationKey</span><span class="p">(</span><span class="n">binaryPath</span><span class="p">.</span><span class="n">getDirectory</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">rsc</span><span class="se">\\</span><span class="s">activation.raisim&quot;</span><span class="p">);</span>

  <span class="c1">/// create raisim world</span>
  <span class="n">raisim</span><span class="o">::</span><span class="n">World</span> <span class="n">world</span><span class="p">;</span>
  <span class="n">world</span><span class="p">.</span><span class="n">setTimeStep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">);</span>

  <span class="c1">/// create objects</span>
  <span class="n">world</span><span class="p">.</span><span class="n">addGround</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;steel&quot;</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">sphere1</span> <span class="o">=</span> <span class="n">world</span><span class="p">.</span><span class="n">addSphere</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;steel&quot;</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">sphere2</span> <span class="o">=</span> <span class="n">world</span><span class="p">.</span><span class="n">addSphere</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;rubber&quot;</span><span class="p">);</span>
  <span class="k">auto</span> <span class="n">sphere3</span> <span class="o">=</span> <span class="n">world</span><span class="p">.</span><span class="n">addSphere</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;copper&quot;</span><span class="p">);</span>

  <span class="n">sphere1</span><span class="o">-&gt;</span><span class="n">setPosition</span><span class="p">(</span><span class="mi">-2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
  <span class="n">sphere2</span><span class="o">-&gt;</span><span class="n">setPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
  <span class="n">sphere3</span><span class="o">-&gt;</span><span class="n">setPosition</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>

  <span class="n">world</span><span class="p">.</span><span class="n">setMaterialPairProp</span><span class="p">(</span><span class="s">&quot;steel&quot;</span><span class="p">,</span> <span class="s">&quot;steel&quot;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>
  <span class="n">world</span><span class="p">.</span><span class="n">setMaterialPairProp</span><span class="p">(</span><span class="s">&quot;steel&quot;</span><span class="p">,</span> <span class="s">&quot;rubber&quot;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>
  <span class="n">world</span><span class="p">.</span><span class="n">setMaterialPairProp</span><span class="p">(</span><span class="s">&quot;steel&quot;</span><span class="p">,</span> <span class="s">&quot;copper&quot;</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>

  <span class="c1">/// launch raisim servear</span>
  <span class="n">raisim</span><span class="o">::</span><span class="n">RaisimServer</span> <span class="n">server</span><span class="p">(</span><span class="o">&amp;</span><span class="n">world</span><span class="p">);</span>
  <span class="n">server</span><span class="p">.</span><span class="n">launchServer</span><span class="p">();</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">raisim</span><span class="o">::</span><span class="n">MSLEEP</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">integrateWorldThreadSafe</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="n">server</span><span class="p">.</span><span class="n">killServer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-articulated-systems">
<h2>Example - Articulated Systems<a class="headerlink" href="#example-articulated-systems" title="Permalink to this headline">¶</a></h2>
<div class="section" id="urdf-way">
<h3>URDF Way<a class="headerlink" href="#urdf-way" title="Permalink to this headline">¶</a></h3>
<p>The material can be specified in the URDF file as following</p>
<div class="highlight-XML notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Foot link --&gt;</span>
<span class="nt">&lt;link</span> <span class="na">name=</span><span class="s">&quot;LF_FOOT&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;collision&gt;</span>
        <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">&quot;0 0 0.02325&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;geometry&gt;</span>
            <span class="nt">&lt;sphere</span> <span class="na">radius=</span><span class="s">&quot;0.035&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/geometry&gt;</span>
        <span class="nt">&lt;material</span> <span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;contact</span> <span class="na">name=</span><span class="s">&quot;ice&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/material&gt;</span>
    <span class="nt">&lt;/collision&gt;</span>
<span class="nt">&lt;/link&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>C++ Way<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Alternatively, you can specify the material dynamically as following</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">anymal</span><span class="o">-&gt;</span><span class="n">getCollisionBody</span><span class="p">(</span><span class="s">&quot;LF_FOOT/0&quot;</span><span class="p">).</span><span class="n">setMaterial</span><span class="p">(</span><span class="s">&quot;ice&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>“LF_FOOT/0” means the first collision body of the link “LF_FOOT”.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="HeightMap.html" class="btn btn-neutral float-right" title="Height Map" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Contact.html" class="btn btn-neutral float-left" title="Contact and Collision" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, RaiSim Tech Inc.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>