

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RaisimGymTorch &mdash; raisim 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RaiSim Unity" href="RaisimUnity.html" />
    <link rel="prev" title="RaisimPy Example" href="RaiSimPyExample.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: White" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> raisim
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Acknowledgement.html">Acknowledgement</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSim C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="LoggingSystem.html">Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConventionsAndNotations.html">Conventions and Notations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorldSystem.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="Object.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contact.html">Contact and Collision</a></li>
<li class="toctree-l1"><a class="reference internal" href="MaterialSystem.html">Material System</a></li>
<li class="toctree-l1"><a class="reference internal" href="HeightMap.html">Height Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="Constraints.html">Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="RayTest.html">Ray Test</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSimMatlab</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RaiSimMatlabIntroduction.html">RaisimMatlab Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaiSimMatlabExample.html">RaisimMatlab Example</a></li>
</ul>
<p class="caption"><span class="caption-text">RaiSimPy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RaiSimPyIntroduction.html">RaisimPy Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RaiSimPyExample.html">RaisimPy Example</a></li>
</ul>
<p class="caption"><span class="caption-text">Related Software</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">RaisimGymTorch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-raisimgymtorch">What is raisimGymTorch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-raisimgymtorch">Why raisimGymTorch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-run-the-example">How to run the example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-add-a-custom-environment">How to add a custom environment?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-structure-if-you-are-curious">Code structure (if you are curious)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RaisimUnity.html">RaiSim Unity</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">raisim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>RaisimGymTorch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="raisimgymtorch">
<h1>RaisimGymTorch<a class="headerlink" href="#raisimgymtorch" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-raisimgymtorch">
<h2>What is raisimGymTorch?<a class="headerlink" href="#what-is-raisimgymtorch" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/raisimGymTorchOverview.png"><img alt="RaiSimPy demo (robots.py)" src="../_images/raisimGymTorchOverview.png" style="width: 600px;" /></a>
<p>raisimGymTorch is a gym environment example with raisim.
A simple pytorch-based RL framework is provided as well but it should work well with any other RL frameworks.
Instead of using raisimPy, pybind11 wraps a vectorized environment in C++ so that the parallelization happens in C++.
This improves the speed tremendously.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>raisim dependencies</p></li>
<li><p>(optional) virtualenv or anaconda</p></li>
</ul>
</div>
<div class="section" id="why-raisimgymtorch">
<h2>Why raisimGymTorch?<a class="headerlink" href="#why-raisimgymtorch" title="Permalink to this headline">¶</a></h2>
<p>raisimGymTorch is designed such that you can collect <strong>tens of billions of state transitions</strong> with a single desktop machine.
Such a number of state transitions is necessary to train for very difficult tasks. An example of a trained policy is shown below</p>
<img alt="trained policy 1" src="../_images/raisimGymTorch_trainedPolicy1.gif" />
<img alt="trained policy 2" src="../_images/raisimGymTorch_trainedPolicy2.gif" />
<p>About <strong>160 billion time steps</strong> were used to train the above controller.
raisimGymTorch can process about 500k time steps per second in the above environment (with 3950x) with an actuator network (which is as heavy as the physics simulation).</p>
</div>
<div class="section" id="how-to-run-the-example">
<h2>How to run the example<a class="headerlink" href="#how-to-run-the-example" title="Permalink to this headline">¶</a></h2>
<p>We provide an ANYmal locomotion example.
In the raisimGymTorch directory,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop
python raisimGymTorch/env/envs/rsg_anymal/runner.py
</pre></div>
</div>
<p>To visualize the policy, run raisimUnity as well.
It will show/record the performance of the policy every 200 iterations.
All recorded videos can be found in <code class="docutils literal notranslate"><span class="pre">raisimlib/raisimUnity/&lt;OS&gt;/screenshots</span></code></p>
</div>
<div class="section" id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>RaiSimGymTorch wraps a c++ environment (i.e., ENVIRONMENT.hpp) as a python library using Pybind11.
When you call <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code>, all environments under <code class="docutils literal notranslate"><span class="pre">raisimGymTorch/raisimGymTorch/env/envs</span></code> are compiled.
The compiled libraries are stored in <code class="docutils literal notranslate"><span class="pre">raisimGymTorch/raisimGymTorch/env/bin</span></code>.</p>
<p>All the rest happens in Python.
You can import your environment from your python code.
For example, the anymal locomotion example can be imported as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">raisimGymTorch.env.bin</span> <span class="pre">import</span> <span class="pre">rsg_anymal</span></code>
Your launch file (e.g., <code class="docutils literal notranslate"><span class="pre">runner.py</span></code>) can be customized for your need.</p>
</div>
<div class="section" id="how-to-add-a-custom-environment">
<h2>How to add a custom environment?<a class="headerlink" href="#how-to-add-a-custom-environment" title="Permalink to this headline">¶</a></h2>
<p>You can add your environment in <code class="docutils literal notranslate"><span class="pre">raisimGymTorch/raisimGymTorch/env/envs</span></code>.
If you want to keep your source file somewhere else, then add a symlink to it in <code class="docutils literal notranslate"><span class="pre">raisimGymTorch/raisimGymTorch/env/envs</span></code>.
An example environment can be found <a class="reference external" href="https://github.com/raisimTech/raisimlib/tree/master/raisimGymTorch/raisimGymTorch/env/envs/rsg_anymal">here</a></p>
</div>
<div class="section" id="code-structure-if-you-are-curious">
<h2>Code structure (if you are curious)<a class="headerlink" href="#code-structure-if-you-are-curious" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ENVIRONMENT</span></code> class is where you define the dynamics, reward, termination condition and so on.
This class inherits from <code class="docutils literal notranslate"><span class="pre">RaisimGymEnv</span></code>, which add basic functionalities to the environment such as <code class="docutils literal notranslate"><span class="pre">setSimulationTimeStep</span></code>, <code class="docutils literal notranslate"><span class="pre">setControlTimeStep</span></code>, <code class="docutils literal notranslate"><span class="pre">getObDim</span></code> and so on.
If <code class="docutils literal notranslate"><span class="pre">RaisimGymEnv</span></code> is not general enough for you, you can also make <code class="docutils literal notranslate"><span class="pre">ENVIRONMENT</span></code> independent from <code class="docutils literal notranslate"><span class="pre">RaisimGymEnv</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">RaisimGymEnv</span></code> is wrapped by <code class="docutils literal notranslate"><span class="pre">VectorizedEnvironment</span></code>, which parallelizes the environment using openmp.
You can consider it similar to <code class="docutils literal notranslate"><span class="pre">VectorEnv</span></code> in OpenAI Baselines but RaisimGym parallelization happens in C++, which makes it orders of magnitude faster.</p>
<p><code class="docutils literal notranslate"><span class="pre">raisim_gym.cpp</span></code> is a Pybind11 wrapping of <code class="docutils literal notranslate"><span class="pre">VectorizedEnvironment</span></code>.
It simply defines the interface functions.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">RaisimGymVecEnv</span></code> is a python class that wraps a python library created from <code class="docutils literal notranslate"><span class="pre">raisim_gym.cpp</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="RaisimUnity.html" class="btn btn-neutral float-right" title="RaiSim Unity" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="RaiSimPyExample.html" class="btn btn-neutral float-left" title="RaisimPy Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, RaiSim Tech Inc.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>